<section id="main-page">
  <div class="gar-row promo-block">
    <div class="gar-row-item">
      <div class="gar-row title">Недавно приобрели</div>
      <gar-carousel [items]="aSlider" [template]="cardComponent"></gar-carousel>
    </div>

    <div class="gar-row-item">
      <div class="gar-row title">Покупка бизнеса с гарантиями</div>
      <div class="right">

        <div class="wrapper-container">

          <p-card header="{{oTopAction.title}}" subheader="" [style]="{width: '100%'}"
                  style="background-color: #F1F1F1"
                  styleClass="card">

            <ng-template pTemplate="header">
              <!-- <img alt="Card" src="assets/showcase/images/usercard.png"> -->
              <!-- <h5>Покупка бизнеса любого размера онлайн с гарантиями</h5> -->
            </ng-template>
            <!-- <p>{{oTopAction.text}}</p> -->
            <p class="right-text">{{oTopAction.text}}</p>
            <ng-template pTemplate="footer">

              <!-- <p-button label="Подробнее" icon="" styleClass="p-button-dark"></p-button> -->
              <gar-button role="primary" routerLink="/deal/start">Подробнее</gar-button>
              <!-- <p-button label="Cancel" icon="pi pi-times" styleClass="p-button-secondary" [style]="{'margin-left': '.5em'}">
                              </p-button> -->
            </ng-template>

          </p-card>
        </div>
        <div class="right-block-img">
          <img class="right-images" src="../../../assets/images/right-img.png" alt="картинка правого блока">

        </div>
      </div>
    </div>
  </div>

  <!-- Область с 3 карточками. -->
  <div class="row section-mb">
    <div class="col-xxl-4 col-xl-4 col-lg-4 col-md-12 card-business-holder" *ngFor="let item of aDataActions">
      <div class="card-business">
        <h3 class="three-cards-header">{{item.title}}</h3>
        <p-card [style]="{width: '100%'}" styleClass="card">
          <div class="card-business-content">
            <ng-template pTemplate="header">
              <!-- <img alt="Card" src="assets/showcase/images/usercard.png"> -->
            </ng-template>
            <h5>{{item.subTitle}}</h5>
            <p>{{item.text}}</p>
            <button class="btn btn-dark" (click)="onRoute(item.buttonText)">{{item.buttonText}}</button>
            <ng-template pTemplate="footer">
              <!-- <p-button label="Save" icon="pi pi-check"></p-button> -->
              <!-- <p-button label="Cancel" icon="pi pi-times" styleClass="p-button-secondary" [style]="{'margin-left': '.5em'}">
        </p-button> -->
            </ng-template>
          </div>
        </p-card>
      </div>
    </div>
  </div>

  <div class="row section-mb" *ngIf="!isHideBusinessWithGarant">
    <div class="col-lg-12 col-xs-12 card-line">
      <p-card class="business-garanteese">
        <ng-template pTemplate="header">
          <strong>Вы можете приобрести бизнес с гарантиями</strong>
          <button
            type="button"
            class="close"
            aria-label="Close"
            (click)="isHideBusinessWithGarant = !isHideBusinessWithGarant">
            <span aria-hidden="true"><img src="../../../assets/images/cross.svg" alt=""></span>
          </button>
        </ng-template>
        <p>{{oSuggestion.text}}</p>
        <ng-template pTemplate="footer">
          <div class="d-flex align-items-center">
            <button
              class="btn btn-dark more-info-btn"
              routerLink="/deal/start">
            {{oSuggestion.button2Text}}
          </button>

            <button
              class="btn btn-default btn-show-more"
              (click)="isHideBusinessWithGarant = !isHideBusinessWithGarant">
              {{oSuggestion.button1Text}}
          </button>
          </div>
        </ng-template>
      </p-card>
    </div>
  </div>

  <!-- Секция быстрого поиска. -->
  <div class="section">
    <div class="gar-row title">Быстрый поиск</div>
    <div class="home-quick-search">
      <form #filterForm="ngForm" novalidate class="home-quick-search-main">
        <div class="home-quick-search-section">
          <div class="gar-row title item">Вид бизнеса</div>
          <gar-select [(ngModel)]="selectedViewBusiness" [items]="aViewBusiness" displayLabel="viewName"></gar-select>
        </div>

        <div class="home-quick-search-section">
          <div class="gar-row title item">Категория</div>
          <gar-select [(ngModel)]="selectedCategory" [items]="aBusinessCategories" displayLabel="categoryName"></gar-select>
        </div>

        <div class="home-quick-search-section">
          <div class="gar-row title item">Город</div>
          <gar-select [(ngModel)]="selectedCity" [items]="aCities" displayLabel="cityName"></gar-select>
        </div>

        <div class="home-quick-search-section">
          <div class="gar-row title item">Стоимость</div>

          <div class="gar-grid home-quick-search-section-price">
            <gar-input-number title="От" [(ngModel)]="minPrice" name="minPrice"></gar-input-number>
            <gar-input-number title="До" [(ngModel)]="maxPrice" name="maxPrice"></gar-input-number>
          </div>
        </div>

        <div class="home-quick-search-section">
          <div class="gar-row title item">Сделка онлайн</div>
          <p-inputSwitch [(ngModel)]="isGarant"></p-inputSwitch>
        </div>
      </form>

      <div class="align-center">
        <gar-button role="primary" (click)="onFilterFranchisesAsync(filterForm)">Найти</gar-button>
      </div>

      <div class="gar-grid-cards">
        <app-catalog-simple-card *ngFor="let item of aFranchises" [item]="item"></app-catalog-simple-card>
      </div>

      <div class="align-center">
        <gar-button role="secondary">Показать ещё</gar-button>
      </div>
    </div>
  </div>

  <div class="section home-special-offers">
    <div class="gar-grid gar-grid_wrap">
      <a routerLink="#" class="home-special-offer">
        <picture>
          <source srcset="/assets/images/franchise-block-picture.webp" type="image/webp">
          <source srcset="/assets/images/franchise-block-picture.png" type="image/png">
          <img src="/assets/images/franchise-block-picture.png" alt="Описание для СЕО">
        </picture>
      </a>

      <a routerLink="#" class="home-special-offer">
        <picture>
          <source srcset="/assets/images/franchise-block-picture.webp" type="image/webp">
          <source srcset="/assets/images/franchise-block-picture.png" type="image/png">
          <img src="/assets/images/franchise-block-picture.png" alt="Описание для СЕО">
        </picture>
      </a>
    </div>
  </div>

  <!-- Популярные франшизы. -->
  <div class="row section-mb">
    <div class="col-12">
      <h5 class="title-franchise">Популярные франшизы</h5>
    </div>
    <div class="col-xxl-3 col-xl-3 col-lg-6 col-md-6" *ngFor="let item of aPopularFranchises">
      <div class="popular-list">
        <div>
          <p-card header="{{item.title}}" subheader="{{item.text}}" [style]="{width: '100%'}"
            styleClass="p-card-shadow">
            <ng-template pTemplate="header">
              <img [src]="item.url">
            </ng-template>
            <strong>{{item.textDoPrice}} {{item.price | priceFormat:item.price}} ₽</strong>
            <ng-template pTemplate="footer">

            </ng-template>
          </p-card>
        </div>
      </div>
    </div>
  </div>

  <!-- Новые объявления готового бизнеса. -->
  <div class="row section-mb">
    <div class="col-12">
      <h5 class="title-franchise">Новые объявления готового бизнеса</h5>
    </div>
    <div class="col-xxl-3 col-xl-3 col-lg-6 col-md-6" *ngFor="let item of aNewBusiness$ | async">
      <div class="popular-list">
        <div>
          <p-card header="{{item.title}}" subheader="{{item.text}}" [style]="{width: '100%'}"
            styleClass="p-card-shadow">
            <ng-template pTemplate="header">
              <img [src]="item.url">
            </ng-template>
            <strong>{{item.textDoPrice}} {{item.price | priceFormat:item.price}} ₽</strong>
            <ng-template pTemplate="footer">

            </ng-template>
          </p-card>
        </div>
      </div>
    </div>
  </div>

  <!-- Бизнес блог. -->
  <!-- <div class="row section-mb">
    <div class="col-12">
      <h5 class="title-franchise">Бизнес блог</h5>
    </div>
    <div class="col--xxl-3 col-xl-3 col-lg-6 col-md-6" *ngFor="let item of aBlogs">
      <div class="popular-list">
        <div class="blog-item">
          <p-card header="{{item.title}}" subheader="" [style]="{width: '100%'}" styleClass="p-card-shadow">
            <ng-template pTemplate="header">
              <img [src]="item.url">
            </ng-template>
            <ng-template pTemplate="footer">

            </ng-template>
          </p-card>
        </div>
      </div>
    </div>

    <div class="col-xxl-3 col-xl-3 col-lg-6 col-md-6">
      <div class="more-articles">
        <p-card header="" subheader="" [style]="{width: '100%'}" styleClass="p-card-shadow">
          <ng-template pTemplate="header">
          </ng-template>
          <div class="more-articles-content d-flex align-items-center mt-4">
            <div class="more-articles-content-text">
              <h4>Больше статей</h4>
              <p>Перейдите в наш блог и найдите
                там массу полезной информации.</p>
            </div>
            <img src="../../../assets/images/Frame 66.png" height="32">
          </div>
          <ng-template pTemplate="footer">

          </ng-template>
        </p-card>
      </div>
    </div>
  </div> -->

  <!-- Новости делового мира. -->
  <section class="section">
    <app-news-block></app-news-block>
  </section>

  <!-- Категории готового бизнеса. -->
  <div class="row ready-business-categories section-mb">
    <!-- 1 столбец. -->
    <div class="col-xxl-3 col-xl-3 col-lg-3 col-md-6 col-sm-12">
      <h5 class="title-franchise" (click)="showCategoryOnMobile($event)">
        <span>Категории бизнеса</span>
        <img src="./../../../assets/images/Arrow 1.png" alt="gobizy arrow icon" />
      </h5>
      <div>
        <div class="category-item" *ngFor="let item of categoryList1">
          <img class="space-right-image-category" [src]="item.url">
          <span>{{item.name}}</span>
          <img class="space-right-image-category space-arrow-category" src="../../../assets/images/Arrow 1.png">
        </div>
      </div>
    </div>

    <!-- 2 столбец -->
    <div class="col-xxl-3 col-xl-3 col-lg-3 col-md-6 col-sm-12">
      <div class="title-franchise">&nbsp;</div>
      <div class="category-item" *ngFor="let item of categoryList2">
        <img class="space-right-image-category" [src]="item.url">
        <span>{{item.name}}</span>
        <img class="space-right-image-category space-arrow-category" src="../../../assets/images/Arrow 1.png">
      </div>
    </div>

    <!-- 3 столбец. -->
    <div class="col-xxl-3 col-xl-3 col-lg-3 col-md-6 col-sm-12">
      <h5 class="title-franchise" (click)="showCategoryOnMobile($event)">
        <span>Категории франшиз</span>
        <img src="./../../../assets/images/Arrow 1.png" alt="gobizy arrow icon" />
      </h5>
      <div>
        <div class="category-item" *ngFor="let item of categoryList3">
          <img class="space-right-image-category" [src]="item.url">
          <span>{{item.name}}</span>
          <img class="space-right-image-category space-arrow-category" src="../../../assets/images/Arrow 1.png">
        </div>
      </div>
    </div>

    <!-- 4 столбец -->
    <div class="col-xxl-3 col-xl-3 col-lg-3 col-md-6 col-sm-12">
      <div class="title-franchise">&nbsp;</div>
      <div class="category-item" *ngFor="let item of categoryList4">
        <img class="space-right-image-category" [src]="item.url">
        <span>{{item.name}}</span>
        <img class="space-right-image-category space-arrow-category" src="../../../assets/images/Arrow 1.png">
      </div>
    </div>
  </div>
</section>
